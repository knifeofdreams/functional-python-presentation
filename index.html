<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">

    <title>FUNctional programming in Python</title>

    <meta name="description"
          content="A quick example to demonstrate whether Python is really a good tool for functional programming.">
    <meta name="author" content="Judit Ordog-Andrasi">

    <meta name="apple-mobile-web-app-capable" content="yes"/>
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"/>

    <meta name="viewport"
          content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">

    <link rel="stylesheet" href="css/reveal.css">
    <link rel="stylesheet" href="css/theme/league.css" id="theme">

    <!-- Code syntax highlighting -->
    <link rel="stylesheet" href="lib/css/monokai_sublime.css">
    <!--<link rel="stylesheet" href="lib/css/hybrid.css">-->
    <!--<link rel="stylesheet" href="lib/css/railscasts.css">-->
    <!--<link rel="stylesheet" href="lib/css/rainbow.css">-->
    <!--<link rel="stylesheet" href="lib/css/tomorrow-night-eighties.css">-->

    <style>
        .reveal pre code {
            max-height:1000px;
        }
    </style>

    <!-- Printing and PDF exports -->
    <script>
        var link = document.createElement('link');
        link.rel = 'stylesheet';
        link.type = 'text/css';
        link.href = window.location.search.match(/print-pdf/gi) ? 'css/print/pdf.css' : 'css/print/paper.css';
        document.getElementsByTagName('head')[0].appendChild(link);
    </script>

    <!--[if lt IE 9]>
    <script src="lib/js/html5shiv.js"></script>
    <![endif]-->
</head>

<body>

<div class="reveal">

    <!-- Any section element inside of this container is displayed as a slide -->
    <div class="slides">
        <section>
            <h1>FUNctional programming in Python</h1>

            <h3>Can Python really be functional?</h3>

            <p>
                <small>Created by Judit Ordog-Andrasi / <a href="http://twitter.com/knifeofdreams">@knifeofdreams</a>
                </small>
            </p>
        </section>

        <section>
            <h1>FizzBuzz</h1>
        </section>

        <section>
            <h3>Write a program that iterates through the numbers from 1 to 100 and:</h3>
            <ul>
                <li>For multiples of <b>3</b> print <b>"Fizz"</b>
                <li>For multiples of <b>5</b> print <b>"Buzz"</b>
                <li>For numbers which are multiples of <b>both 3 and 5</b> print <b>"FizzBuzz"</b>
                <li>For others, print the number itself
            </ul>
        </section>

        <section>
            <p style="font-size:150%">
                1 2 Fizz 4 Buzz Fizz 7 8 Fizz Buzz
                11 Fizz 13 14 FizzBuzz 16 17 Fizz 19 Buzz
                Fizz 22 23 Fizz Buzz 26 Fizz 28 29 FizzBuzz
                31 32 Fizz 34 Buzz Fizz 37 38 Fizz Buzz
                41 Fizz 43 44 FizzBuzz 46 47 Fizz 49 Buzz
                Fizz 52 53 Fizz Buzz 56 Fizz 58 59 FizzBuzz
                61 62 Fizz 64 Buzz Fizz 67 68 Fizz Buzz
                71 Fizz 73 74 FizzBuzz 76 77 Fizz 79 Buzz
                Fizz 82 83 Fizz Buzz 86 Fizz 88 89 FizzBuzz
                91 92 Fizz 94 Buzz Fizz 97 98 Fizz Buzz
            </p>
        </section>


        <section>
            <section>
                <h2>Trivial solution</h2>
                <pre><code data-trim>
def fizzbuzz():
    result = []
    for i in range(1,101):
        if (i % 3 == 0 and i % 5 == 0):
            result.append("FizzBuzz")
        elif (i % 3 == 0):
            result.append("Fizz")
        elif (i % 5 == 0):
            result.append("Buzz")
        else:
            result.append(str(i))
    return result
                </code></pre>
                <aside class="notes"><p>Hellobello :)</p></aside>
            </section>
        </section>

        <section>
            <section>
                <h2>Test it!</h2>
                <pre><code data-trim>
import unittest

from fizzbuzz import fizzbuzz

class FizzBuzzTest(unittest.TestCase):
    def test_fizzbuzz_should_return_fizzbuzz_array(self):
        result = ["1", "2", "Fizz", "4", "Buzz", "Fizz", "7", "8", "Fizz", "Buzz",
                "11", "Fizz", "13", "14", "FizzBuzz", "16", "17", "Fizz", "19", "Buzz",
                "Fizz", "22", "23", "Fizz", "Buzz", "26", "Fizz", "28", "29", "FizzBuzz",
                "31", "32", "Fizz", "34", "Buzz", "Fizz", "37", "38", "Fizz", "Buzz",
                "41", "Fizz", "43", "44", "FizzBuzz", "46", "47", "Fizz", "49", "Buzz",
                "Fizz", "52", "53", "Fizz", "Buzz", "56", "Fizz", "58", "59", "FizzBuzz",
                "61", "62", "Fizz", "64", "Buzz", "Fizz", "67", "68", "Fizz", "Buzz",
                "71", "Fizz", "73", "74", "FizzBuzz", "76", "77", "Fizz", "79", "Buzz",
                "Fizz", "82", "83", "Fizz", "Buzz", "86", "Fizz", "88", "89", "FizzBuzz",
                "91", "92", "Fizz", "94", "Buzz", "Fizz", "97", "98", "Fizz", "Buzz"]
        self.assertEqual(result, fizzbuzz())

if __name__ == '__main__':
    unittest.main()
                </code></pre>
            </section>
        </section>

        <section>
            <section>
                <h1>No for loops!</h1>
            </section>
        </section>

        <section>
            <section>
                <h2>Recursion</h2>
                <pre><code data-trim>
def fizzbuzz(number = 100):
    if number < 1:
        return []

    if (number % 3 == 0 and number % 5 == 0):
        result = "FizzBuzz"
    elif (number % 3 == 0):
        result = "Fizz"
    elif (number % 5 == 0):
        result = "Buzz"
    else:
        result = str(number)

    return fizzbuzz(number - 1) + [result]
                </code></pre>
            </section>
        </section>

        <section>
            <section>
                <h1>No if statement!</h1>
            </section>
        </section>

        <section>
            <section>
                <h2>Extract fizzbuzz of n</h2>
                <pre><code data-trim>
def fizzbuzz_of_n(number):
    if (number % 3 == 0 and number % 5 == 0):
        return "FizzBuzz"
    elif (number % 3 == 0):
        return "Fizz"
    elif (number % 5 == 0):
        return "Buzz"
    else:
        return str(number)


def fizzbuzz(number = 100):
    if number < 1:
        return []

    return fizzbuzz(number - 1) + [fizzbuzz_of_n(number)]
                </code></pre>
            </section>
        </section>

        <section>
            <section>
                <h2>Map instead of recursion</h2>
                <pre><code data-trim>
def fizzbuzz(number = 100):
    if number < 1:
        return []

    return fizzbuzz(number - 1) + [fizzbuzz_of_n(number)]
                </code></pre>

                <pre><code data-trim>
def fizzbuzz():
    return map(fizzbuzz_of_n, range(1,101))
                </code></pre>

            </section>
        </section>

        <section>
            <section>
                <h2>Map in fizzbuzz</h2>
                <pre><code data-trim>
def fizzbuzz_of_n(number):
    if (number % 3 == 0 and number % 5 == 0):
        return "FizzBuzz"
    elif (number % 3 == 0):
        return "Fizz"
    elif (number % 5 == 0):
        return "Buzz"
    else:
        return str(number)


def fizzbuzz():
    return map(fizzbuzz_of_n, range(1,101))
                </code></pre>
            </section>
        </section>

        <section>
            <section>
                <h1>Lambdas... lambdas everywhere</h1>
            </section>
        </section>

        <section>
            <section>
                <pre><code data-trim>
id_ = lambda number: str(number)
                </code></pre>
            </section>
        </section>

        <section>
            <section>
                <pre><code data-trim>
id_ = lambda number: str(number)
fizz_ = lambda number: "Fizz"
buzz_ = lambda number: "Buzz"
fizzbuzz_ = lambda number: "FizzBuzz"
                </code></pre>
            </section>
        </section>

        <section>
            <section>
                <h2>Lambdas everywhere!</h2>
                <pre><code data-trim>
def fizzbuzz():
    return map(lambda number: fizzbuzz_lambdas[number % 15](number), range(1,101))

id_ = lambda number: str(number)
fizz_ = lambda number: "Fizz"
buzz_ = lambda number: "Buzz"
fizzbuzz_ = lambda number: "FizzBuzz"

fizzbuzz_lambdas = [
                    fizzbuzz_, id_, id_, fizz_, id_,
                    buzz_, fizz_, id_, id_, fizz_,
                    buzz_, id_, fizz_, id_, id_
                    ]
                </code></pre>
            </section>
        </section>

        <section>
            <section>
                <h1>Redundancy</h1>
            </section>
        </section>

        <section>
            <section>
                <pre><code data-trim>
def const(constant):
    def return_const(x):
        return lambda number: x
    return return_const(constant)
                </code></pre>
            </section>
        </section>

        <section>
            <section>
                <pre><code data-trim>
def const(constant):
    def return_const(x):
        return lambda number: x
    return return_const(constant)

fizz_ = const("Fizz")
buzz_ = const("Buzz")
fizzbuzz_ = const("FizzBuzz")

                </code></pre>
            </section>
        </section>

        <section>
            <section>
                <h2>Const generation</h2>
                <pre><code data-trim>
def fizzbuzz():
    return map(lambda number: fizzbuzz_lambdas[number % 15](number), range(1,101))

def const(constant):
    def return_const(x):
        return lambda number: x
    return return_const(constant)

id_ = lambda number: str(number)
fizz_ = const("Fizz")
buzz_ = const("Buzz")
fizzbuzz_ = const("FizzBuzz")

fizzbuzz_lambdas = [
                    fizzbuzz_, id_, id_, fizz_, id_,
                    buzz_, fizz_, id_, id_, fizz_,
                    buzz_, id_, fizz_, id_, id_
                    ]
                </code></pre>
            </section>
        </section>

        <section>
            <section>
                <h1>We're not repeating repeating ourselves... right?</h1>
            </section>
        </section>

        <section>
            <section>
                <pre><code data-trim>
fizz_ = const("Fizz")
buzz_ = const("Buzz")
fizzbuzz_ = const("FizzBuzz")
                </code></pre>
            </section>
        </section>

        <section>
            <section>
                <pre><code data-trim>
def concat(f, g):
    return lambda number: f(number) + g(number)
                </code></pre>
            </section>
        </section>

        <section>
            <section>
                <pre><code data-trim>
def concat(f, g):
    return lambda number: f(number) + g(number)

fizz_ = const("Fizz")
buzz_ = const("Buzz")
fizzbuzz_ = concat(fizz_, buzz_)
                </code></pre>
            </section>
        </section>

        <section>
            <section>
                <h2>Concat fizzbuzz</h2>
                <pre><code data-trim>
def fizzbuzz():
    return map(lambda number: fizzbuzz_lambdas[number % 15](number), range(1,101))

def const(constant):
    def return_const(x):
        return lambda number: x
    return return_const(constant)

def concat(f, g):
    return lambda number: f(number) + g(number)

id_ = lambda number: str(number)
fizz_ = const("Fizz")
buzz_ = const("Buzz")
fizzbuzz_ = concat(fizz_, buzz_)

fizzbuzz_lambdas = [
                    fizzbuzz_, id_, id_, fizz_, id_,
                    buzz_, fizz_, id_, id_, fizz_,
                    buzz_, id_, fizz_, id_, id_
                    ]
                </code></pre>
            </section>
        </section>

        <section>
            <section>
                <h1>Can we do better?</h1>
            </section>
        </section>

        <section>
            <section>
                <pre><code data-trim>
fizzbuzz_lambdas = [
                        fizzbuzz_, id_, id_, fizz_, id_,
                        buzz_, fizz_, id_, id_, fizz_,
                        buzz_, id_, fizz_, id_, id_
                    ]
                </code></pre>
            </section>
        </section>

        <section>
            <section>
                <pre><code data-trim>
def multiples_of(n):
    return map(lambda i: i * n, range(1, 10))
                </code></pre>

                <pre><code data-trim>
multiples_of(3)
[3, 6, 9, 12, 15, 18, 21, 24, 27]
                </code></pre>


                <pre><code data-trim>
multiples_of(5)
[5, 10, 15, 20, 25, 30, 35, 40, 45]
                </code></pre>
            </section>
        </section>


        <section>
            <section>
                <pre><code data-trim>
def take(n, list):
    return list[:n]
                </code></pre>
            </section>
        </section>

        <section>
            <section>
                <pre><code data-trim>
def take(n, list):
    return list[:n]

multiples_of_3 = take(4, multiples_of(3))
[3, 6, 9, 12]

multiples_of_5 = take(2, multiples_of(5))
[5, 10]
                </code></pre>
            </section>
        </section>

        <section>
            <section>
                <pre><code data-trim>
def substract(list_from, what_list):
    return list(set(list_from) - set(what_list))
                </code></pre>
            </section>
        </section>

        <section>
            <section>
                <pre><code data-trim>
multiples_of_3 = take(4, multiples_of(3))
multiples_of_5 = take(2, multiples_of(5))
multiples_of_both = [0]
others = substract(range(1,15), multiples_of_3 + multiples_of_5)
                </code></pre>
            </section>
        </section>

        <section>
            <section>
                <pre><code data-trim>
def repeat(value, times):
    return [value] * times

def for_all(value, function):
    return dict(zip(value, repeat(function, len(value))))
                </code></pre>
            </section>
        </section>

        <section>
            <section>
                <pre><code data-trim>
def combine_two_dicts(lhs, rhs):
    result = lhs.copy()
    result.update(rhs)
    return result

def combine_dicts(*dict_args):
    return reduce(combine_two_dicts, dict_args, {})
                </code></pre>
            </section>
        </section>

        <section>
            <section>
                <table style="border: solid 0px;">
                    <tr>
                        <td style="border: solid 0px;">fizzbuzz_lambdas =</td>
                        <td style="border: solid 0px;">combine_dicts(</td>
                    </tr>
                    <tr>
                        <td style="border: solid 0px;"></td>
                        <td style="border: solid 0px;">for_all(multiples_of_3, fizz_),</td>
                    </tr>
                    <tr>
                        <td style="border: solid 0px;"></td>
                        <td style="border: solid 0px;">for_all(multiples_of_5, buzz_),</td>
                    </tr>
                    <tr>
                        <td style="border: solid 0px;"></td>
                        <td style="border: solid 0px;">for_all(multiples_of_both, fizzbuzz_),</td>
                    </tr>
                    <tr>
                        <td style="border: solid 0px;"></td>
                        <td style="border: solid 0px;">for_all(others, id_)</td>
                    </tr>
                    <tr>
                        <td style="border: solid 0px;"></td>
                        <td style="border: solid 0px;">)</td>
                    </tr>

                </table>

            </section>
        </section>

        <section>
            <section>
                <h2>Increase readability</h2>
                <pre><code data-trim>
def return_(function):
    return lambda x: function(x)

it_ = lambda number: str(number)
fizz_ = const("Fizz")
buzz_ = const("Buzz")
fizzbuzz_ = concat(fizz_, buzz_)
                </code></pre>
            </section>
        </section>

        <section>
            <section>
                <table style="border: solid 0px;">
                    <tr>
                        <td style="border: solid 0px;">fizzbuzz_lambdas =</td>
                        <td style="border: solid 0px;">combine_dicts(</td>
                    </tr>
                    <tr>
                        <td style="border: solid 0px;"></td>
                        <td style="border: solid 0px;">for_all(multiples_of_3, return(fizz_)),</td>
                    </tr>
                    <tr>
                        <td style="border: solid 0px;"></td>
                        <td style="border: solid 0px;">for_all(multiples_of_5, return(buzz_)),</td>
                    </tr>
                    <tr>
                        <td style="border: solid 0px;"></td>
                        <td style="border: solid 0px;">for_all(multiples_of_both, return(fizzbuzz_)),</td>
                    </tr>
                    <tr>
                        <td style="border: solid 0px;"></td>
                        <td style="border: solid 0px;">for_all(others, return(it_))</td>
                    </tr>
                    <tr>
                        <td style="border: solid 0px;"></td>
                        <td style="border: solid 0px;">)</td>
                    </tr>

                </table>

            </section>
        </section>

        <section>
            <section>
                <table style="border: solid 0px;">
                    <tr>
                        <td style="border: solid 0px;">fizzbuzz<span style="opacity: 0.25;">_lambdas </span>=</td>
                        <td style="border: solid 0px;"><span style="opacity: 0.25;">combine_dicts(</span></td>
                    </tr>
                    <tr>
                        <td style="border: solid 0px;"></td>
                        <td style="border: solid 0px;">for_all<span style="opacity: 0.25;">(</span>multiples_of_3, return<span style="opacity: 0.25;">(</span>fizz<span style="opacity: 0.25;">_)),</span></td>
                    </tr>
                    <tr>
                        <td style="border: solid 0px;"></td>
                        <td style="border: solid 0px;">for_all<span style="opacity: 0.25;">(</span>multiples_of_5, return<span style="opacity: 0.25;">(</span>buzz<span style="opacity: 0.25;">_)),</span></td>
                    </tr>
                    <tr>
                        <td style="border: solid 0px;"></td>
                        <td style="border: solid 0px;">for_all<span style="opacity: 0.25;">(</span>multiples_of_both, return<span style="opacity: 0.25;">(</span>fizzbuzz<span style="opacity: 0.25;">_)),</span></td>
                    </tr>
                    <tr>
                        <td style="border: solid 0px;"></td>
                        <td style="border: solid 0px;">for_all<span style="opacity: 0.25;">(</span>others, return<span style="opacity: 0.25;">(</span>it<span style="opacity: 0.25;">_))</span></td>
                    </tr>
                    <tr>
                        <td style="border: solid 0px;"></td>
                        <td style="border: solid 0px;"><span style="opacity: 0.25;">)</span></td>
                    </tr>

                </table>
            </section>
        </section>


        <section>
            <section>
                <h2>Generators</h2>
                <pre><code data-trim>
def multiples_of(n):
    return map(lambda i: i * n, range(1, 10))

def take(n, list):
    return list[:n]

                </code></pre>
            </section>
        </section>


        <section>
            <section>
                <h2>Generators</h2>
                <pre><code data-trim>
import itertools

def multiples_of(n):
    i = 0
    while True:
        i += 1
        yield n*i

def take(n, generator):
    return list(itertools.islice(generator, 0, n))

                </code></pre>
            </section>
        </section>

        <section>
            <section>
                <h2>Generators</h2>
                <pre><code data-trim>
import itertools

def multiples_of(n):
    return itertools.count(n, n)

def take(n, generator):
    return list(itertools.islice(generator, 0, n))

                </code></pre>
            </section>
        </section>


        <section>
            <section>
                <h2>Extract get_fizz_buzz</h2>
                <pre><code data-trim>
def fizzbuzz(n = 100):
    return map(lambda number: fizzbuzz_lambdas[number % 15](number), range(1,n + 1))
)
                </code></pre>
            </section>
        </section>

        <section>
            <section>
                <h2>Extract get_fizz_buzz</h2>
                <pre><code data-trim>
import itertools

def fizzbuzz(n = 100):
    return map(
        get_fizzbuzz_for, range(1,n + 1)
    )

def get_fizzbuzz_for(number):
    return fizzbuzz_lambdas[number % 15](number)
               </code></pre>
            </section>
        </section>

        <section>
            <section>
                <h2>Fizzbuzz generator extracted</h2>
                <pre><code data-trim>
import itertools

def fizzbuzz(n = 100):
    return take(n, fizzbuzz_generator())

def fizzbuzz_generator():
    return itertools.imap(lambda function, i: function(i), itertools.cycle(fizzbuzz_lambdas.values()), itertools.count(1,1))

multiples_of_3 = take(4, multiples_of(3))
multiples_of_5 = take(2, multiples_of(5))
multiples_of_both = [15]
others = substract(range(1,15), multiples_of_3 + multiples_of_5)
                </code></pre>
            </section>
        </section>


    </div>

</div>

<script src="lib/js/head.min.js"></script>
<script src="js/reveal.js"></script>

<script>

    // Full list of configuration options available at:
    // https://github.com/hakimel/reveal.js#configuration
    Reveal.initialize({
        width: 1200,
        controls: true,
        progress: true,
        history: true,
        center: true,

        transition: 'none', // none/fade/slide/convex/concave/zoom

        // Optional reveal.js plugins
        dependencies: [
            {
                src: 'lib/js/classList.js', condition: function () {
                return !document.body.classList;
            }
            },
            {
                src: 'plugin/markdown/marked.js', condition: function () {
                return !!document.querySelector('[data-markdown]');
            }
            },
            {
                src: 'plugin/markdown/markdown.js', condition: function () {
                return !!document.querySelector('[data-markdown]');
            }
            },
            {
                src: 'plugin/highlight/highlight.js', async: true, condition: function () {
                return !!document.querySelector('pre code');
            }, callback: function () {
                hljs.initHighlightingOnLoad();
            }
            },
            {src: 'plugin/zoom-js/zoom.js', async: true},
            {src: 'plugin/notes/notes.js', async: true}
        ]
    });

</script>

</body>
</html>
